<!-- prettier-ignore -->
{% extends "layout/base.html" %}

{% block body %}
<header>
  {% include "component/navbar.html" %}
  <h1>Tasks</h1>
</header>

<main>
  <!-- Dag Run Details -->
  <div>
    <div>
      <div>DAG ID</div>
      <div>{{ dag_run.dag_id }}</div>
    </div>
    <div>
      <div>Execution Date</div>
      <div>{{ dag_run.execution_date }}</div>
    </div>
    <div>
      <div>Run ID</div>
      <div>{{ dag_run.run_id }}</div>
    </div>
    <div>
      <div>State</div>
      {% if let Some(state) = dag_run.state %}
      <div>{{ state }}</div>
      {% else %}
      <div></div>
      {% endif %}
    </div>
    <div>
      <div>Start Date</div>
      {% if let Some(start_date) = dag_run.start_date %}
      <div>{{ start_date }}</div>
      {% else %}
      <div></div>
      {% endif %}
    </div>
    <div>
      <div>End Date</div>
      {% if let Some(end_date) = dag_run.end_date %}
      <div>{{ end_date }}</div>
      {% else %}
      <div></div>
      {% endif %}
    </div>
  </div>

  <!-- Dag Run table -->
  <table>
    <thead>
      <tr>
        <th>Task ID</th>
        <th>State</th>
        <th>Start Date</th>
        <th>End Date</th>
        <th>Reties</th>
      </tr>
    </thead>
    <tbody>
      {% for task in tasks %}
      <tr id="row_{{ task.task_id }}">
        <td>{{ task.task_id }}</td>
        {% if let Some(state) = task.state %}
        <td>{{ state }}</td>
        {% else %}
        <td></td>
        {% endif %}
        {% if let Some(start_date) = task.start_date %}
        <td>{{ start_date }}</td>
        {% else %}
        <td></td>
        {% endif %} {% if let Some(end_date) = task.end_date %}
        <td>{{ end_date }}</td>
        {% else %}
        <td></td>
        {% endif %}
        <td>{{ task.try_number }}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</main>
{% endblock %}
